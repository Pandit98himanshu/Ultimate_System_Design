<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>ShortURL</title>
	<style>
		html, body {
			background-color: #1e1e1e;	/* Black background */
			color: #ffffff;			/* White text color for readability */
			margin: 0;					/* Remove default browser margins */
			padding: 0;
			height: 100%;				/* Ensure they span the full height of the viewport */
		}
		body{
			font-family: Arial,Helvetica,sans-serif;
			max-width: 720px;
			margin: 40px auto;
			padding: 0 16px}
		h1{
			font-size: 24px;
			margin-bottom: 8px;
			text-align: center
		}
		label{
			display: block;
			font-weight: 600;
			margin-top: 60px
		}
		input[type=text]{
			width: 100%;
			padding: 8px;
			font-size: 14px;
			background-color: #1e1e1e;
			color: #ffffff;
			border: 1px solid #404040;
			border-radius: 4px;
			margin-top: 8px
		}
		button{
			margin-top: 6px;
			padding: 8px 16px;
			font-size: 14px;
			border-radius: 4px;
			border: 0;
			background: #1976d2;
			color: #fff;
			cursor: pointer
		}
		.note{
			color:#666;
			margin-top:8px;
			font-size:13px
		}
		hr.custom-line {
			border: none; 
			height: 3px;				/* Sets the thickness of the line */
			background-color: #404040;	/* Sets the color */
			margin: 20px auto;			/* Centers the line and adds vertical spacing */
			margin-top: 60px;
			margin-bottom: 60px
		}
	</style>
</head>
<body>
	<h1>Shorten your long URL</h1>
	<label for="longUrlUser">Long URL</label>
	<input id="longUrlUser" type="text" placeholder="https://example.com/very/long/path" />
	<button id="shortenBtn">Shorten</button>

	<label for="shortUrl">Short URL</label>
	<input id="shortUrl" type="text" readonly placeholder="Short URL will appear here" />

	<hr class="custom-line">

	<h1>Get original URL</h1>
	<label for="shortUrlUser">Short URL</label>
	<input id="shortUrlUser" type="text" placeholder="https://shorturl.com/unique_short_code" />
	<button id="expandBtn">Expand</button>

	<label for="originaUrl">Short URL</label>
	<input id="originalUrl" type="text" readonly placeholder="Original URL will appear here" />

	<script>
		const shortenBtn = document.getElementById('shortenBtn');
		const expandBtn = document.getElementById('expandBtn');
		const longInput = document.getElementById('longUrlUser');
		const shortOutput = document.getElementById('shortUrl');
		const shortInput = document.getElementById('shortUrlUser');
		const longOutput = document.getElementById('originaUrl');

		shortenBtn.addEventListener('click', async () => {
			const longUrl = longInput.value.trim();
			if (!longUrl) { alert('Please enter a long URL'); return; }

			try {
			const resp = await fetch('/shorten', {
				method: 'POST',
				headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
				body: 'longUrl=' + encodeURIComponent(longUrl)
			});

			if (!resp.ok) {
				const txt = await resp.text();
				alert('Error: ' + (txt || resp.statusText));
				return;
			}

			const shorten = await resp.text();
			shortOutput.value = shorten;
		} catch (err) {
			alert('Request failed: ' + err.message);
		}
		});

		elongateBtn.addEventListener('click', async () => {
			const shortUrl = shortInput.value.trim();
			if (!shortUrl) { alert('Please enter a long URL'); return; }

			try {
			const resp = await fetch('/expand', {
				method: 'GET',
				body: 'shortUrl=' + encodeURIComponent(shortUrl)
			});

			if (!resp.ok) {
				const txt = await resp.text();
				alert('Error: ' + (txt || resp.statusText));
				return;
			}

			const expanded = await resp.text();
			longOutput.value = expanded;
		} catch (err) {
			alert('Request failed: ' + err.message);
		}
		});

	</script>
</body>
</html>
