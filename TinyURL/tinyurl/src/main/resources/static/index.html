<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>TinyURL</title>
	<style>
		html, body {
			background-color: #1e1e1e;	/* Black background */
			color: #ffffff;			/* White text color for readability */
			margin: 0;					/* Remove default browser margins */
			padding: 0;
			height: 100%;				/* Ensure they span the full height of the viewport */
		}
		body{font-family:Arial,Helvetica,sans-serif;max-width:720px;margin:40px auto;padding:0 16px}
		h1{font-size:24px;margin-bottom:8px;text-align: center}
		label{display:block;font-weight:600;margin-top:60px}
		input[type=text]{width:100%;padding:8px;font-size:14px;background-color:#1e1e1e;color:#ffffff;border:1px solid #404040;border-radius:4px;margin-top:8px}
		button{margin-top:6px;padding:8px 16px;font-size:14px;border-radius:4px;border:0;background:#1976d2;color:#fff;cursor:pointer}
		.note{color:#666;margin-top:8px;font-size:13px}
	</style>
</head>
<body>
	<h1>TinyURL</h1>
	<label for="longUrl">URL</label>
	<input id="longUrl" type="text" placeholder="https://example.com/very/long/path" />
	<button id="shortenBtn">Shorten</button>

	<label for="shortUrl">Short URL</label>
	<input id="shortUrl" type="text" readonly placeholder="Short URL will appear here" />

	<script>
		const btn = document.getElementById('shortenBtn');
		const longInput = document.getElementById('longUrl');
		const shortInput = document.getElementById('shortUrl');

		btn.addEventListener('click', async () => {
			const longUrl = longInput.value.trim();
			if (!longUrl) { alert('Please enter a long URL'); return; }

			try {
			const resp = await fetch('/api/shorten', {
				method: 'POST',
				headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
				body: 'longUrl=' + encodeURIComponent(longUrl)
			});

			if (!resp.ok) {
				const txt = await resp.text();
				alert('Error: ' + (txt || resp.statusText));
				return;
			}

			const tiny = await resp.text();
			shortInput.value = tiny;
		} catch (err) {
			alert('Request failed: ' + err.message);
		}
		});

	</script>
</body>
</html>
